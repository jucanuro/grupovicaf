{% if proyectos_pendientes %}
<div class="clean-card p-4 md:p-8 rounded-2xl shadow-xl overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-300" id="projects-table">
        <thead class="bg-gray-100/80">
            <tr>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                    Nombre del Proyecto
                </th>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                    Cliente
                </th>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider hidden sm:table-cell">
                    Monto
                </th>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider hidden sm:table-cell">
                    NÂ° Muestras
                </th>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                    Estado
                </th>
                <th scope="col" class="py-4 px-4 md:px-6 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                    Acciones
                </th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
            {% for proyecto in proyectos_pendientes %}
            <tr class="hover:bg-blue-50/50 transition-colors duration-200" data-id="{{ proyecto.pk }}"
                data-nombre="{{ proyecto.nombre_proyecto }}" data-cliente="{{ proyecto.cliente.razon_social }}"
                data-monto="{{ proyecto.monto_cotizacion }}" data-muestras="{{ proyecto.numero_muestras }}"
                data-estado="{{ proyecto.estado }}">
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-sm font-medium text-gray-900">
                    {{ proyecto.nombre_proyecto }}
                </td>
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-sm text-gray-600">
                    {{ proyecto.cliente.razon_social }}
                </td>
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-sm text-gray-600 hidden sm:table-cell">
                    S/. {{ proyecto.monto_cotizacion|floatformat:2 }} 
                </td>
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-sm text-gray-600 hidden sm:table-cell">
                    {{ proyecto.numero_muestras }} 
                </td>
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-sm text-gray-900">
                    <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full 
                        {% if proyecto.estado == 'PENDIENTE' %}bg-gray-100 text-gray-700 border border-gray-300{% endif %}
                        {% if proyecto.estado == 'EN_CURSO' %}bg-blue-100 text-blue-700 border border-blue-300{% endif %}
                        {% if proyecto.estado == 'MUESTRAS_ASIGNADAS' %}bg-green-100 text-green-700 border border-green-300{% endif %}
                        {% if proyecto.estado == 'MUESTRAS_VALIDADAS' %}bg-indigo-100 text-indigo-700 border border-indigo-300{% endif %}
                        {% if proyecto.estado == 'FINALIZADO' %}bg-purple-100 text-purple-700 border border-purple-300{% endif %}
                        {% if proyecto.estado == 'CANCELADO' %}bg-red-100 text-red-700 border border-red-300{% endif %}
                        ">
                        {{ proyecto.get_estado_display }}
                    </span>
                </td>
                <td class="py-4 px-4 md:px-6 whitespace-nowrap text-left text-sm font-medium">
                    <a href="{% url 'proyectos:gestion_muestras_proyecto' pk=proyecto.pk %}"
                        class="inline-flex items-center gap-2 px-4 py-2 rounded-full
                                text-xs font-bold text-white
                                bg-gradient-to-r from-emerald-500 to-green-600
                                hover:from-emerald-600 hover:to-green-700
                                transition duration-300 ease-in-out
                                shadow-md hover:shadow-lg
                                transform hover:scale-[1.03]"
                        aria-label="Ir a la GestiÃ³n de Muestras">
                        <i data-lucide="flask-round" class="w-4 h-4 fill-white"></i> 
                        GestiÃ³n
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{# Bloque de PaginaciÃ³n #}
<div class="clean-card p-4 rounded-2xl shadow-md flex justify-center items-center space-x-4 mt-6">
    {% if proyectos_pendientes.has_previous %}
    <a href="?page={{ proyectos_pendientes.previous_page_number }}"
        class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors transform hover:scale-105 font-semibold border border-gray-300">Anterior</a>
    {% endif %}

    <span class="px-4 py-2 text-sm text-gray-800 bg-gray-200 rounded-lg border border-gray-300 font-bold">
        PÃ¡gina {{ proyectos_pendientes.number }} de {{ proyectos_pendientes.paginator.num_pages }}
    </span>

    {% if proyectos_pendientes.has_next %}
    <a href="?page={{ proyectos_pendientes.next_page_number }}"
        class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors transform hover:scale-105 font-semibold border border-gray-300">Siguiente</a>
    {% endif %}
</div>
{% else %}
<div class="clean-card p-8 rounded-2xl shadow-xl">
    <p class="text-center text-gray-600 text-lg">No hay proyectos pendientes en este momento. ðŸŽ‰</p>
</div>
{% endif %}

<script>
    // Aseguramos que los iconos de lucide se creen tambiÃ©n para el fragmento
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    });
</script>