{% extends "base_vicafpro.html" %} 
{% load static %}

{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<style>
    /* El degradado animado se mantiene como elemento de diseño "Alto Top" */
    .animated-gradient-text {
        background: linear-gradient(to right, #10B981, #3B82F6, #8B5CF6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        background-size: 200% auto;
        animation: text-gradient 3s linear infinite alternate;
    }

    @keyframes text-gradient {
        to {
            background-position: 200% center;
        }
    }
</style>
<div class="max-w-full mx-auto p-4">
    <div class="border-b border-gray-200 pb-4 mb-6">
        <div class="pb-4">
            <header class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6 animate-fade-in-up">
                <h1 class="flex text-xl font-extrabold animated-gradient-text">
                    Lista de registros de ensayos
                    <svg class="h-6 w-6 ml-4 fill-indigo-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M184.6 475.5C181.5 482.8 179.2 490.4 177.8 498.1C163.3 506.9 146.3 512 128 512C75 512 32 469 32 416L32 128C14.3 128 0 113.7 0 96C0 78.3 14.3 64 32 64L224 64C241.7 64 256 78.3 256 96C256 113.7 241.7 128 224 128L224 383.6L184.6 475.5zM96 128L96 256L160 256L160 128L96 128zM352 64L512 64C529.7 64 544 78.3 544 96C544 113.7 529.7 128 512 128L512 281.4L603.3 494.4C605.6 499.8 607.1 505.5 607.7 511.4L608 512L607.7 512C607.9 513.8 608 515.6 608 517.4C608 549.7 581.8 576 549.4 576L282.5 576C250.2 576 223.9 549.8 223.9 517.4C223.9 515.6 224 513.8 224.2 512L223.9 512L224.2 511.4C224.8 505.6 226.3 499.8 228.6 494.4L320 281.4L320 128C302.3 128 288 113.7 288 96C288 78.3 302.3 64 320 64L352 64zM453.2 306.6C449.8 298.6 448 290.1 448 281.4L448 128L384 128L384 281.4C384 290.1 382.2 298.6 378.8 306.6L345.6 384L486.3 384L453.1 306.6z"/></svg>
                </h1>
                <a href="{% url 'proyectos:lista_solicitudes_ensayo' %}" class="inline-flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white font-semibold rounded-full hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="list" class="lucide lucide-list w-5 h-5"><path d="M3 5h.01"></path><path d="M3 12h.01"></path><path d="M3 19h.01"></path><path d="M8 5h13"></path><path d="M8 12h13"></path><path d="M8 19h13"></path></svg>
                    Regresar a Lista
                </a>
            </header>
        </div>
    </div>
    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Solicitud</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tarea / Método</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha de Registro</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Técnico</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                    </tr>
                </thead>
                
                {# Cuerpo de la tabla: Fondo blanco, divisores claros #}
                <tbody class="divide-y divide-gray-200 bg-white">
                    {% for resultado in resultados %}
                    {# Fila: Hover sutil en gris claro #}
                    <tr class="hover:bg-gray-50 transition duration-150">
                        {# Código Solicitud: Color primario para resaltarlo #}
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-indigo-600">
                            {{ resultado.detalle_ensayo.solicitud.codigo_solicitud }}
                        </td>
                        {# Tarea / Método #}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                            {{ resultado.detalle_ensayo.tarea_nombre }} <br>
                            <span class="text-xs text-gray-500">{{ resultado.detalle_ensayo.metodo.nombre_metodo }}</span>
                        </td>
                        {# Fecha #}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            {{ resultado.fecha_realizacion|date:"Y-m-d" }}
                        </td>
                        {# Técnico #}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            {{ resultado.tecnico_registro.user.get_full_name|default:"N/A" }}
                        </td>
                        
                        {# Estado #}
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            {% if resultado.es_valido %}
                                {# VERIFICADO: Verde en fondo verde claro #}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                    VERIFICADO
                                </span>
                            {% else %}
                                {# PENDIENTE: Amarillo en fondo amarillo claro #}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                    PENDIENTE
                                </span>
                            {% endif %}
                        </td>
                        
                        {# Acciones #}
                       <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <div class="flex justify-end items-center gap-2">
                                {# Botón Editar: Estilo Indigo suave #}
                                <a href="" 
                                class="inline-flex items-center px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-600 hover:text-white transition-all duration-200 group" 
                                title="Editar Resultado">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1.5 transition-transform group-hover:rotate-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                    </svg>
                                    <span class="font-bold text-xs uppercase tracking-wider">Editar</span>
                                </a>

                                {# Botón Ver: Estilo Blue suave #}
                                <a href="" 
                                class="inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-600 hover:text-white transition-all duration-200 group" 
                                title="Ver Detalle">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                    <span class="font-bold text-xs uppercase tracking-wider">Ver</span>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        {# Mensaje Empty: Texto gris medio, fondo sutil #}
                        <td colspan="6" class="px-6 py-8 text-center text-gray-500 bg-gray-50">
                            No se han registrado resultados de ensayos aún.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    {# Paginación (Placeholder) #}
    <div class="mt-4 text-center text-sm text-gray-500 hidden">
       Paginación
    </div>

</div>
{% endblock content %}